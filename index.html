<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!-- Prevent zooming on mobile -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Audio Player App</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 20px;
        text-align: center;
        touch-action: manipulation; /* Prevent double-tap zoom */
    }
    #status {
        font-size: 12px;
        opacity: 0.667;
        margin-bottom: 20px;
    }
    #title {
        font-size: 20px;
        margin-bottom: 10px;
        text-align: left;
    }
    #description {
        font-size: 14px;
        min-height: 125px;
        height: 125px;
        max-height: 125px;
        overflow-y: auto;
        margin-bottom: 20px;
        white-space: pre-wrap; /* Ensures line breaks are rendered */
        text-align: left;
    }
    #controls {
        margin-bottom: 20px;
    }
    button {
        font-size: 24px;
        padding: 20px;
        margin: 10px;
        width: 80%;
        max-width: 300px;
        touch-action: manipulation; /* Prevent double-tap zoom */
        text-align: center;
    }
    #playback-speed {
        width: 100%;
        height: 50px;
    }
    input[type="range"] {
        -webkit-appearance: none;
        width: 100%;
        height: 50px;
        background: #ddd;
        outline: none;
        opacity: 0.7;
        -webkit-transition: .2s;
        transition: opacity .2s;
    }
    input[type="range"]:hover {
        opacity: 1;
    }
    input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 50px;
        height: 50px;
        background: #4CAF50;
        cursor: pointer;
    }
    input[type="range"]::-moz-range-thumb {
        width: 50px;
        height: 50px;
        background: #4CAF50;
        cursor: pointer;
    }
</style>
</head>
<body>

<div id="status">1 of 50</div>
<h1 id="title"></h1>
<p id="description"></p>

<div id="controls">
    <button id="play-button" style="width:75%">Play</button>
    <button id="pause-button" style="display:none; width:75%">Pause</button>
    <button id="resume-button" style="display:none; width:75%">Resume</button>
    <br>
    <button id="prev-button" style="width:33%">Previous</button>
    <button id="next-button" style="width:33%">Next</button>
    <br>
    <button id="speak-button" style="width:75%">Ler Texto</button>
</div>

<div>
    <label for="speed-range">Playback Speed: <span id="speed-label">1.4</span>x</label>
    <input type="range" id="speed-range" min="0.3" max="3.0" step="0.1" value="1.4">
</div>

<script>
    var titles = [
        "Peacock",
        "Lion",
        "Tiger",
        "Elephant",
        "Eagle in Flight",
        "Spider Web",
        "Honeycomb",
        "Human Hand",
        "Human Eye",
        "Oak Tree",
        "Mountain Range",
        "Ocean Wave",
        "Fireworks Display",
        "Grandfather Clock",
        "Chessboard with Pieces",
        "Dinosaur Skeleton",
        "Knight in Armor",
        "Medieval Castle",
        "Pirate Ship",
        "Roller Coaster",
        "Ferris Wheel",
        "Coral Reef",
        "Octopus",
        "Jellyfish",
        "Whale",
        "Shark",
        "Monarch Butterfly",
        "Spider",
        "Honeybee",
        "Snowflake",
        "Volcano Erupting",
        "Tornado",
        "Thunderstorm Clouds",
        "Sports Car",
        "Airplane",
        "Grand Piano",
        "Electric Guitar",
        "Bicycle",
        "Smartphone",
        "Windmill",
        "Lighthouse",
        "Parrot",
        "Butterfly",
        "Rose",
        "Steam Locomotive",
        "Rocket Launch",
        "Cactus",
        "Rainbow",
        "Violin",
        "Basketball Hoop"
    ];

    var descriptions = [
        "In front of you stands a bird with a small head topped by a tiny crown of feathery plumes...",
        "Think of standing before a majestic lion, its strong body facing you directly...",
        "Standing before you is a powerful creature with a large, muscular body..."
    ];

    var audio = new Audio();
    var currentIndex = 0;
    var isPlaying = false;

    // Restore currentIndex from localStorage
    if (localStorage.getItem('ao-currentIndex')) {
        currentIndex = parseInt(localStorage.getItem('ao-currentIndex'));
    }

    var statusElem = document.getElementById('status');
    var titleElem = document.getElementById('title');
    var descriptionElem = document.getElementById('description');
    var playButton = document.getElementById('play-button');
    var pauseButton = document.getElementById('pause-button');
    var resumeButton = document.getElementById('resume-button');
    var nextButton = document.getElementById('next-button');
    var prevButton = document.getElementById('prev-button');
    var speakButton = document.getElementById('speak-button');
    var speedRange = document.getElementById('speed-range');
    var speedLabel = document.getElementById('speed-label');

    function loadAudio(index) {
        audio.src = index + '.mp3';
        audio.currentTime = 0;
        audio.playbackRate = parseFloat(speedRange.value);
        statusElem.textContent = (index + 1) + ' of 50';
        titleElem.textContent = titles[index];
        descriptionElem.textContent = descriptions[index];

        audio.onended = function() {
            setTimeout(function() {
                nextTrack();
            }, 1000);
        };
    }

    function nextTrack() {
        audio.pause();
        currentIndex = (currentIndex + 1) % 50;
        localStorage.setItem('ao-currentIndex', currentIndex);
        statusElem.textContent = (currentIndex + 1) + ' of 50';
        loadAudio(currentIndex);
        if (isPlaying) {
            audio.play();
        }
        updatePlayPauseButtons();
    }

    function prevTrack() {
        audio.pause();
        currentIndex = (currentIndex - 1 + 50) % 50;
        localStorage.setItem('ao-currentIndex', currentIndex);
        statusElem.textContent = (currentIndex + 1) + ' of 50';
        loadAudio(currentIndex);
        if (isPlaying) {
            audio.play();
        }
        updatePlayPauseButtons();
    }

    nextButton.addEventListener('click', function() {
        nextTrack();
    });

    prevButton.addEventListener('click', function() {
        prevTrack();
    });

    playButton.addEventListener('click', function() {
        audio.play();
        isPlaying = true;
        updatePlayPauseButtons();
    });

    pauseButton.addEventListener('click', function() {
        audio.pause();
        isPlaying = false;
        updatePlayPauseButtons();
    });

    resumeButton.addEventListener('click', function() {
        audio.play();
        isPlaying = true;
        updatePlayPauseButtons();
    });

    function updatePlayPauseButtons() {
        if (isPlaying) {
            playButton.style.display = 'none';
            pauseButton.style.display = 'inline-block';
            resumeButton.style.display = 'none';
        } else {
            if (audio.currentTime > 0 && audio.currentTime < audio.duration) {
                playButton.style.display = 'none';
                pauseButton.style.display = 'none';
                resumeButton.style.display = 'inline-block';
            } else {
                playButton.style.display = 'inline-block';
                pauseButton.style.display = 'none';
                resumeButton.style.display = 'none';
            }
        }
    }

    speedRange.addEventListener('input', function() {
        var speed = parseFloat(speedRange.value);
        audio.playbackRate = speed;
        speedLabel.textContent = speed.toFixed(1);
        localStorage.setItem('ao-playbackSpeed', speed);
    });

    speakButton.addEventListener('click', function() {
        var text = titleElem.textContent + ". " + descriptionElem.textContent;
        var utterance = new SpeechSynthesisUtterance(text);
        var voices = speechSynthesis.getVoices();

        // Encontrar a voz 'Microsoft Thalita' no navegador (caso disponÃ­vel)
        for (var i = 0; i < voices.length; i++) {
            if (voices[i].name === "Microsoft ThalitaMultilingual Online (Natural) - Portuguese (Brazil)") {
                utterance.voice = voices[i];
                break;
            }
        }

        speechSynthesis.speak(utterance);
    });

    loadAudio(currentIndex);
    updatePlayPauseButtons();
</script>

</body>
</html>
